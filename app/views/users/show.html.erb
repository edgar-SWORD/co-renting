<div class="container">
<div class="banner">
<div class="avatar-img">
<% if @user.photo.attached? %>
          <%= cl_image_tag @user.avatar_url, class: "profil-picture", alt: "avatar" %>
          <% else %>
          <img class="profil-picture" src="<%= @user.avatar_url %>" alt="<%= @user.first_name %>">
        <% end %>
</div>

    <div class="user-name">
      <h1><%= @user.first_name.capitalize %></h1>
    </div>
    <div class="flex-wrap">
    <div class="banner-tags d-flex ">
    <div class="tag-rythm">
      <span><%= @user.rythm.capitalize %></span>
    </div>
    <div class="tag-rythm">
      <span><%= @user.alternance.capitalize %></span>
    </div>
    </div>
    <div class="send-message-button button-primary show_hero">
    <%= link_to 'Send a message', root_path %></div>
    </div>

  </div>

<div class="user-description">
  <div class="container d-flex flex-wrap">
    <div class="col">
      <div class="row">
      <h3>My description</h3>
      <p class="text-size-medium description-container">
        <%= @user.long_description %>
      </p>


      <div class="budget">
        <%= @user.min_budget%>
        <span> - </span>
        <%= @user.max_budget%>
        <span> â‚¬ </span>
      </div>


      </div>
  </div>

      <div class="children-user">
    <div class="col">
      <div class="row">
        <h3>My children</h3>
        <div class="description-container">
        <ul>
        <div class="d-flex flex-wrap align-items-center justify-content-center">
        <% @children.each do |child|  %>
        <div class="child-container">
        <div class="child-gender-icon">
        <% if child.gender == "male" %>
        <i class="fa-solid fa-mars"></i>
        <% else %>
        <i class="fa-solid fa-venus"></i>
        <% end %>
        </div>
          <li ><%= child.first_name %></li>
          <div class="child-age-icon">
          <% if child.age_range == "baby"  %>
          <i class="fa-solid fa-baby-carriage"></i>
          <%elsif child.age_range == "toddler" %>
          <i class="fa-solid fa-baby"></i>
          <%elsif child.age_range == "child" %>
          <i class="fa-solid fa-child"></i>
           <%else %>
           <i class="fa-solid fa-person"></i>
           <%end  %>
          </div>
        </div>
        <% end %>
        </div>
        </ul>
        </div>
      </div>
      </div>
    </div>
  </div>
</div>

  <div class="user-profil">
    <div class="d-flex">
      <div class="col">
        <div class="row">
          <div class="map-location">
          <h3>My searching location</h3>
          <div class="map_contain"
        data-controller="index-show-map"
        data-index-show-map-markers-value="<%= @markers.to_json %>"
        data-index-show-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
          </div>
        </div>
      </div>

  <div class="col">
  <div class="personnality-section">
    <div class="row">
      <h3>My personality</h3>
  </div>

<div data-controller="jauge" data-jauge-ratio-value="<%= @user.cleanliness %>">
  <div class="jauge-item">
    <h5>Cleanliness:</h5>
     <div class="d-flex justify-content-between">
    <p class="legend-bar left"> Relax</p>
    <p class="legend-bar right"> Maniac</p>
    </div>
    <div class="outer-bar">
      <div data-jauge-target="innerBar" class="inner-bar"></div>
    </div>
  </div>
</div>

<div data-controller="jauge" data-jauge-ratio-value="<%= @user.lifestyle %>">
  <div class="jauge-item">
    <h5>Lifestyle:</h5>
     <div class="d-flex justify-content-between">
    <p class="legend-bar left"> Indoor person</p>
    <p class="legend-bar right"> Outdoor person</p>
    </div>
    <div class="outer-bar">
      <div data-jauge-target="innerBar" class="inner-bar"></div>
    </div>
  </div>
</div>

<div data-controller="jauge" data-jauge-ratio-value="<%= @user.sharing %>">
  <div class="jauge-item">
    <h5>Sharing:</h5>
     <div class="d-flex justify-content-between">
    <p class="legend-bar left"> Sharing</p>
    <p class="legend-bar right"> Protective</p>
    </div>
    <div class="outer-bar">
      <div data-jauge-target="innerBar" class="inner-bar"></div>
    </div>
  </div>
</div>

<div data-controller="jauge" data-jauge-ratio-value="<%= @user.cooking %>">
  <div class="jauge-item">
    <h5>Cooking:</h5>
     <div class="d-flex justify-content-between">
    <p class="legend-bar left">Take away Food</p>
    <p class="legend-bar right">Homemade Food</p>
    </div>
    <div class="outer-bar">
      <div data-jauge-target="innerBar" class="inner-bar"></div>
    </div>
  </div>
</div>

<div data-controller="jauge" data-jauge-ratio-value="<%= @user.storage %>">
  <div class="jauge-item">
    <h5>Storage:</h5>
    <div class="d-flex justify-content-between">
    <p class="legend-bar left"> Light packing</p>
    <p class="legend-bar right"> Heavy storage</p>
    </div>
    <div class="outer-bar">
      <div data-jauge-target="innerBar" class="inner-bar"></div>
    </div>
  </div>
</div>

      </div>
     </div>
    </div>
    </div>
    </div>
  </div>
</div>

<div class="container flex-wrap">
<div class="ideal-flat" >
      <h3>My ideal flat</h3>
      <div class="d-flex">
  <div class="image-style container" >
    <div class="col">
    <div class="row">
      <%if @flat.style == "scandinavian" %>
        <img src="https://images.unsplash.com/photo-1605774337664-7a846e9cdf17?q=80&w=3174&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="scandinavian style">
      <%elsif @flat.style == "industrial" %>
        <img src="https://images.unsplash.com/photo-1563891315366-4606cd73a33f?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="indutrial style">
      <%elsif @flat.style == "boheme" %>
        <img src="https://images.unsplash.com/photo-1600493504591-aa1849716b36?q=80&w=3000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="boheme style">
      <%elsif @flat.style == "vintage" %>
        <img src="https://images.unsplash.com/photo-1604314325417-c021aacfc1c5?q=80&w=2938&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="vintage style">
      <%elsif @flat.style == "art deco" %>
        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=3058&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="art deco style">
      <%else%>
        <img src="https://images.unsplash.com/photo-1570747408017-38b4c5959378?q=80&w=2938&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="no preference style">
      <%end %>
      <span class="flat-style"><%= @flat.style%></span>
    </div>
      </div>
  </div>

  <div class="flat-specifics container">
  <div class="col">
  <div class="row">

    <div class="d-flex">
      <div class="number-room">
      <p>Number of room : <%= @flat.rooms %></p>
      </div>
      <div class="furnished-flat d-flex">
      <div class="furnished-title">
      <p>My ideal flat is furnished : </p>
      </div>
     <div class="response-furnished">
      <%if @flat.is_furnished = 'true' %>
        <p>Yes</p>
      <%elsif @flat.is_furnished = 'false' %>
        <p>No</p>
      <%else%>
        <p>No opinion</p>
      <%end %>
     </div>

      </div>
      </div>


      <div class="row">
     <% if @perks.any? %>
    <ul>
      <div class="d-flex flex-wrap">
    <% @perks.each do |perk| %>
    <% if perk.status == 'positive' %>
    <div class="positive-color perk">
      <li><%= perk.name.capitalize %></li>
    </div>
    <%else%>
     <div class="negative-color perk">
      <li><%= perk.name.capitalize %></li>
    </div>
    <%end %>
    <% end %>
      </div>
    <% end %>
    </div>
      </div>
    </div>
      </div>
      </div>
      </div>
      </div>


<%= link_to 'Edit', edit_user_path(@user) %>
<%= link_to 'Delete', user_path(@user), method: :delete, data: { confirm: 'Are you sure you want to delete this user?' } %>
<br>
<%= link_to 'Back', users_path %>

</div>
